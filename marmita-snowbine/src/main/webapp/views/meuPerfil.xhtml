<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/template/template.xhtml">

	<ui:define name="content">
		<p:panelGrid columns="4" style="width=100%;" id ="panel" styleClass="grid-meu-perfil">
				<f:facet name="header">
	        		<p:outputLabel value="Criação de conta"/>
	        		<br />
	    		</f:facet>
	    		
				<p:outputLabel for="nome" value="Nome:" />
				<p:inputText id="nome" value="#{meuPerfilEditBean.cliente.nome}" required="true" requiredMessage="Nome é obrigatório">
					<f:validateLength minimum="2" maximum="50"/>
				</p:inputText>
				
				<p:outputLabel for="sobrenome" value="Sobrenome:" />
				<p:inputText id="sobrenome" value="#{meuPerfilEditBean.cliente.sobrenome}" required="true" requiredMessage="Sobrenome é obrigatório">
					<f:validateLength minimum="2" maximum="50"/>
				</p:inputText>
				
				<p:outputLabel for="email" value="Email:" />
				<p:inputText id="email" value="#{meuPerfilEditBean.usuario.email}" required="true" requiredMessage="Email é obrigatório">
					<f:validateLength minimum="2" maximum="50"/>
				</p:inputText>
				
				<p:outputLabel for="dtNascimento" value="Data de Nascimento" />
	       		<p:calendar id="dtNascimento" value="#{meuPerfilEditBean.cliente.dataNascimento}" pattern="yyyy-MM-dd" mask="true" required="true" requiredMessage="Data de nascimento é obrigatória"/>
	        
				<p:outputLabel for="cpf" value="Cpf:" />
				<p:inputMask mask="999.999.999-99" id="cpf"	value="#{meuPerfilEditBean.cliente.cpf}" required="true" requiredMessage="Cpf é obrigatório"/>
	
				<p:outputLabel for="rg" value="Rg:" />
				<p:inputText id="rg" value="#{meuPerfilEditBean.cliente.rg}" required="true" requiredMessage="RG é obrigatório" maxlength="10"/>
	
				<p:outputLabel for="rua" value="Rua:"/>
				<p:inputText id="rua" value="#{meuPerfilEditBean.endereco.rua}" required="true" requiredMessage="Rua é obrigatório"/>
	
				<p:outputLabel for="bairro" value="Bairro:" />
				<p:inputText id="bairro" value="#{meuPerfilEditBean.endereco.bairro}" required = "true" requiredMessage="Bairro é obrigatório"/>
	
				<p:outputLabel for="cep" value="Cep:" />
				<p:inputMask mask="99.999-999" id="cep" value="#{meuPerfilEditBean.endereco.cep}" required="true" requiredMessage="Cep é obrigatório" />
	
				<p:outputLabel for="complemento" value="Complemento:" />
				<p:inputText id="complemento" value="#{meuPerfilEditBean.endereco.complemento}"/>
	
				<p:outputLabel for="cidades" value="Cidade:" />
				<p:selectOneMenu id="cidades" value="#{meuPerfilEditBean.endereco.cidade}" required="true" requiredMessage="Escolha uma cidade!">
					<f:converter converterId="generic" />
					<f:selectItems value="#{cidadeListBean.listaEntidade}" var="cidade"
						itemLabel="#{cidade.nome}" itemValue="#{cidade}" />
				</p:selectOneMenu>
				
				<p:outputLabel for="login" value="Login" />
				<p:inputText id="login" value="#{meuPerfilEditBean.usuario.login}" required="true" requiredMessage="Login é obrigatório"/>
	
				<p:outputLabel for="senha" value="Senha" />
				<p:password id="senha" value="#{meuPerfilEditBean.usuario.senha}" required="true" requiredMessage="Senha é obrigatória"/>
				
				<p:outputLabel for="imagem-perfil" value="Imagem de perfil:" />
				<p:fileUpload
				 id="imagem-perfil" fileUploadListener="#{meuPerfilEditBean.uploadImage}"
				 label="Escolher" uploadLabel="Enviar" cancelLabel="Cancelar"
				 allowTypes="/(\.|\/)(gif|jpe?g|png)$/" 
    			 invalidFileMessage="São permitidas somente imagens (gif, jpeg, jpg e png)"/>
				<p:column/>
					
				<p:commandButton value="Salvar cadastro" action="#{meuPerfilEditBean.atualizarConta}" style="width:200px;" update="panel">
					<f:ajax execute="@form" />
				</p:commandButton>
				
				<p:commandButton value="Desativar conta" action="#{meuPerfilEditBean.desativarConta}" style="width:200px" update="panel"/>
				
			</p:panelGrid>
	</ui:define>
</ui:composition>